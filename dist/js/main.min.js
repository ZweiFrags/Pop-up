var tmdiv,tmfgr,opened,allGalAttr,index,currentImgIndex,pppImg,ArrAllGalAttr,lnghtofarr,hrefOfAjax,idOfAjax,trgtAjax;function checkGallery(t){if(t.hasAttribute("data-ppp-gal")){var e=t.getAttribute("data-ppp-gal"),r=document.querySelectorAll('[data-ppp-gal="'+e+'"]');ArrAllGalAttr=Array.from(r),lnghtofarr=ArrAllGalAttr.length;var a=document.createElement("div");a.className="ppp_cntrls",a.innerHTML='<div class="ppp_prev_btn" onclick="showimg(-1)">〈</div>     <div class="ppp_next_btn" onclick="showimg(1)">〉</div>',document.getElementsByTagName("figure")[0].appendChild(a),ArrAllGalAttr.forEach(((t,e)=>{t.classList.contains("opened")&&(currentImgIndex=e)}))}}function GetSomeData(){fetch(hrefOfAjax).then((t=>t.text())).then((t=>{const e=(new DOMParser).parseFromString(t,"text/html").getElementById(idOfAjax);void 0!==e.attributes.src?checkTitle(e):buildMdl(e)}))}function checkImage(t){t.getAttribute("src");if(void 0!==t.attributes.src)out=document.createElement("img"),out.setAttribute("src",t.attributes.src.value);else{var e=document.createElement("div");e.classList.add("ppp-txtwrap"),e.insertAdjacentHTML("beforeend",t.innerHTML),out=e,console.log(t.innerHTML+" "+typeof out)}return out}function buildMdl(t){var e=document.createElement("div");e.className="ppp","object"==typeof t&&(t=t.outerHTML),e.innerHTML='<div class="ppp_hldr"><figure class="ppp_inner marginppp">'+t+'</figure><div class="ppp_close">✕</div></div>',document.body.appendChild(e),document.querySelectorAll(".ppp")[0].classList.add("TESTtransition"),setTimeout((function(){document.querySelectorAll(".ppp")[0].classList.remove("TESTtransition")}),20)}function showimg(t){var e=document.getElementsByClassName("ppp_inner"),r=e[0].getElementsByTagName("img"),a=currentImgIndex+t;r[0].classList.add("hddn_img"),setTimeout((function(){r[0].classList.remove("hddn_img")}),20),(currentImgIndex=a)==lnghtofarr&&(currentImgIndex=0),-1==currentImgIndex&&(currentImgIndex=lnghtofarr-1);var n=ArrAllGalAttr[currentImgIndex].getAttribute("src");r[0].src=n;var i=e[0].getElementsByTagName("figcaption");if(ArrAllGalAttr[currentImgIndex].hasAttribute("data-ppp-title")){var l=ArrAllGalAttr[currentImgIndex].getAttribute("data-ppp-title");i[0].innerHTML=l}else i[0].innerHTML=""}function checkTitle(t){fgrttl=document.createElement("div"),console.log(t.getAttribute("data-ppp-title")),t.hasAttribute("data-ppp-title")?fgrttl.innerHTML='<figcaption class="white">'+t.getAttribute("data-ppp-title")+"</figcaption>":fgrttl.innerHTML='<figcaption class="white"></figcaption>',document.body.getElementsByTagName("figure")[0].appendChild(fgrttl)}document.addEventListener("click",(function(t){if(t.target.hasAttribute("data-ppp-id")){var e=t.target.getAttribute("data-ppp-id");if(document.contains(document.getElementById(e))&&null!=document.getElementById(e).getAttribute("src")){buildMdl(document.getElementById(e))}else{var r=document.getElementById(e).innerHTML;buildMdl(r)}}if(t.target&&"ppp_close"==t.target.className){var a=t.target.closest(".ppp");a.classList.add("TESTtransition"),setTimeout((function(){a.remove()}),500),opened.classList.contains("opened")&&opened.classList.remove("opened")}(hrefOfAjax=t.target.getAttribute("href"),"ajax"==t.target.getAttribute("data-href")&&null!=hrefOfAjax&&(idOfAjax=t.target.getAttribute("data-ajax-id"),trgtAjax=document.querySelector("[data-ajax-id]",idOfAjax),GetSomeData(hrefOfAjax)),t.target.hasAttribute("data-ppp"))&&(r=checkImage(t.target),t.target.classList.add("opened"),opened=t.target,buildMdl(r),checkTitle(t.target),checkGallery(t.target),t.target.hasAttribute("data-ppp-pos")&&(document.querySelector(".ppp").style.justifyContent=t.target.getAttribute("data-ppp-pos")))}));